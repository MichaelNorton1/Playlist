(this.webpackJsonpplaylistapp=this.webpackJsonpplaylistapp||[]).push([[0],{261:function(t,e,n){},285:function(t,e,n){},286:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(87),i=n.n(a),s=(n(261),n(11)),o=n(94),l=n(323),u=n(209),d=n(3),b=n(35),j=n(234),h=n(317),f=n(178),p=n(121),O=n(2),x=function(){var t=Object(r.useState)(!1),e=Object(s.a)(t,2),n=e[0],c=e[1],a=Object(b.f)();return Object(r.useEffect)((function(){c(!0)}),[]),Object(O.jsx)(j.a,{container:!0,sx:Object(d.a)({display:"flex",m:"auto"},a.breakpoints.up("xs"),{width:"100%",justifyContent:"space-evenly",alignItems:"center"}),children:Object(O.jsx)(j.a,{item:!0,xs:3,children:Object(O.jsx)(h.a,{direction:"right",in:n,style:{transitionDelay:"300ms"},mountOnEnter:!0,unmountOnExit:!0,children:Object(O.jsx)(f.a,{sx:{borderRadius:16,boxShadow:4},variant:"outlined",children:Object(O.jsx)(p.a,{align:"center",sx:{p:1.5},children:"Make My Concert"})})})})})},g=n(240),m=n(16),y=n(147),v=n.n(y),k=n(208),S=n(324),C=n(225),w=n(135),P=n(226),I=n(241),A=n.n(I),B=n(221),E=n(222),T=n(223),M=n(224);function F(t){var e=t.singleSearch;return Object(O.jsx)(B.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",overflow:"auto",maxHeight:300},children:e.length>0?e.map((function(t,e){return Object(O.jsx)(E.a,{divider:!0,children:Object(O.jsx)(T.a,{disableGutters:!0,children:Object(O.jsx)(M.a,{primary:e+1+". "+t})},t)},t)})):Object(O.jsx)("div",{})})}var z=n(227),J={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};var R=function(t){var e=t.setPlaylists,n=t.loggedIn,c=t.setMySetlist,a=Object(r.useState)(null),i=Object(s.a)(a,2),o=i[0],l=i[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),j=d[0],h=d[1],f=Object(r.useState)("2021"),x=Object(s.a)(f,2),y=x[0],I=x[1],B=Object(r.useState)(!1),E=Object(s.a)(B,2),T=E[0],M=E[1],R=Object(r.useState)([]),D=Object(s.a)(R,2),G=D[0],L=D[1],H=Object(r.useState)(!1),N=Object(s.a)(H,2),q=N[0],V=N[1],W=Object(b.f)(),Y=function(){var t=Object(k.a)(v.a.mark((function t(e){var n,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o||!(y.length<4)){t.next=2;break}return t.abrupt("return");case 2:if(n=o.replace(" ","-"),"click"!==e.type){t.next=18;break}return V(!0),t.next=7,fetch("https://my-setlist.herokuapp.com/band",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({band:n,yearOf:y})}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}));case 7:if(r=t.sent,console.log(r),r.error){t.next=15;break}return V(!1),t.next=13,r.map((function(t){return t.sets.set}));case 13:return c=t.sent,t.abrupt("return",c);case 15:if(!r.error){t.next=18;break}return V(!1),t.abrupt("return",r);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(k.a)(v.a.mark((function t(n){var r,c,a,i,s,o,l,u,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,Y(n);case 3:if((r=t.sent).error)V(!1);else{for(V(!1),h(!0),c=[],r.forEach((function(t){t.length>0&&c.push.apply(c,Object(m.a)(t))})),a=[],i=0,s=c;i<s.length;i++){o=s[i],l=Object(g.a)(o.song);try{for(l.s();!(u=l.n()).done;)d=u.value,a.includes(d.name)||a.push(d.name)}catch(b){l.e(b)}finally{l.f()}}L(a),e((function(t){return t.length>0?[].concat(Object(m.a)(t),[G]):[G]}))}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{children:Object(O.jsxs)("div",{children:[Object(O.jsx)(C.a,{disabled:!n,sx:{color:"black"},onClick:function(){return M(!0)},children:"Search For Artists"}),Object(O.jsx)(w.a,{open:T,onClose:function(){M(!1),l(""),L(""),h(!1),V(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(O.jsx)(S.a,{sx:J,children:j?Object(O.jsxs)(S.a,{children:[Object(O.jsx)(p.a,{textAlign:"center",sx:{background:W.palette.background.default,borderRadius:25},variant:"h4",children:o}),Object(O.jsx)(C.a,{onClick:function(){c((function(t){return 0===t.length?[{band:o,set:G}]:[].concat(Object(m.a)(t),[{band:o,set:G}])}))},sx:{color:W.palette.background.default,m:2,borderRadius:25,border:"black",background:"black",":hover":{background:"black"}},children:"Add to Setlists"}),Object(O.jsx)(F,{singleSearch:G})]}):Object(O.jsxs)("div",{children:[Object(O.jsx)(P.a,{sx:{pa:2},label:"Search for Band",onChange:function(t){return l(t.target.value)}}),Object(O.jsx)(P.a,{sx:{pa:2},defaultValue:"2021",label:"Year",onChange:function(t){return I(t.target.value)}}),Object(O.jsx)(C.a,{children:q?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z.a,{})," ",Object(O.jsx)(p.a,{children:"Searching..."})]}):Object(O.jsx)(A.a,{fontSize:"large",onClick:function(t){return _(t)}})})]})})})]})})},D=n.p+"static/media/spotify.2ad9efcc.png",G=n(92),L=G.Paper,H=G.Grid,N=G.Button,q=G.Avatar,V=function(t){var e=t.setMySetlist,n=t.loggedIn,c=Object(r.useState)([]),a=Object(s.a)(c,2),i=a[0],o=a[1];return Object(O.jsxs)(H,{container:!0,alignItems:"center",justifyContent:"space-evenly",columnSpacing:2,sx:{height:100,background:"linear-gradient(to right bottom, white, #0000)",borderRadius:24},children:[" ",Object(O.jsx)(H,{item:!0,children:Object(O.jsx)(L,{sx:{},children:Object(O.jsx)(R,{loggedIn:n,setMySetlist:e,playlist:i,setPlaylists:o,sx:{p:1,height:72,width:210}})})}),Object(O.jsx)(H,{item:!0,children:Object(O.jsx)(L,{children:Object(O.jsxs)(N,{onClick:function(){window.location=window.location.href.includes("localhost")?"http://localhost:8888/login":"https://my-setlist.herokuapp.com/login"},sx:{color:"black"},endIcon:Object(O.jsx)(q,{src:D}),children:["Login to Spotify"," "]})})})]})},W=n(242),Y=n.n(W),_=function(t,e){var n=[];return e[0].set.forEach((function(r){var c=r.replace(" ","%20"),a=fetch("https://api.spotify.com/v1/search?q=".concat(c,"%20artist:").concat(e[0].band,"&type=track"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(t){return t.json()})).then((function(t){if(t.tracks.items.length>0)return t.tracks.items[0].uri}));n.push(a)})),Promise.all(n)},K=function(t,e,n){var r=fetch("https://api.spotify.com/v1/users/".concat(t,"/playlists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({name:"".concat(n[0].band," Setlist"),description:"Created by Make my Concert",public:!0})}).then((function(t){return t.json()})).then((function(t){return t.id}));return Promise.resolve(r)},Q=function(t,e,n){Promise.resolve(n).then((function(n){var r=n.filter((function(t){return void 0!==t}));fetch("https://api.spotify.com/v1/playlists/".concat(e,"/tracks"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({uris:r})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return console.log(t)}))}))},U=function(t,e){fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+e}}).then((function(t){return t.json()})).then((function(e){e.id&&t(e.id)})).catch((function(t){return console.log(t)}))},X=(n(285),n(235)),Z=n(232),$=n(231),tt=n(244),et=n.n(tt),nt=n(243),rt=n.n(nt),ct=n(321),at=function(t){var e=t.makePlaylist,n=t.set,c=Object(r.useState)(!1),a=Object(s.a)(c,2),i=a[0],o=a[1];return Object(O.jsxs)(C.a,{disabled:i,onClick:function(){o(!0),e(n.band)},style:{border:"2px solid"},endIcon:Object(O.jsx)(ct.a,{}),children:[" ","add to Spotify"]})},it=function(t){var e=t.mySetlist,n=t.deleteHandler,r=t.makePlaylist;return Object(O.jsx)(f.a,{sx:{m:2,borderRadius:10,height:240,background:"linear-gradient(to right bottom, white, #0000)"},children:e.length>0?e.map((function(t){return Object(O.jsxs)(X.a,{children:[Object(O.jsx)(Z.a,{"aria-controls":"panel1a-content",id:"panel1a-content",expandIcon:Object(O.jsx)(rt.a,{}),children:Object(O.jsx)(p.a,{children:t.band})}),Object(O.jsxs)($.a,{children:[Object(O.jsxs)(C.a,{onClick:function(){n(t.band)},style:{border:"2px solid",margin:4},color:"error",endIcon:Object(O.jsx)(et.a,{}),children:[" ","Delete from setlist"]}),Object(O.jsx)(at,{makePlaylist:r,set:t}),t.set.map((function(t,e){return Object(O.jsx)(E.a,{divider:!0,children:Object(O.jsx)(T.a,{disableGutters:!0,children:Object(O.jsx)(M.a,{primary:e+1+". "+t})},t)},t)}))]})]},t.band)})):Object(O.jsx)(S.a,{sx:{},children:Object(O.jsxs)(p.a,{justifyContent:"center",textAlign:"center",width:"100%",children:[" ","Login and add artists to your Setlist!"]})})})},st=Object(o.b)({palette:{background:{default:"#ABCED2"}}});var ot=function(){var t=Object(r.useState)([]),e=Object(s.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(!1),i=Object(s.a)(a,2),o=i[0],d=i[1],b=Object(r.useState)(null),j=Object(s.a)(b,2),h=j[0],f=j[1],p=Object(r.useState)(null),g=Object(s.a)(p,2),m=g[0],y=g[1];return Object(r.useEffect)((function(){var t=Y.a.parse(window.location.search).access_token;t&&(d(!0),f(t),U(y,h))}),[h]),Object(O.jsxs)(l.a,{theme:st,children:[Object(O.jsx)(u.b,{}),Object(O.jsx)(x,{}),Object(O.jsx)(V,{setMySetlist:c,loggedIn:o,mySetlist:n}),Object(O.jsx)(it,{mySetlist:n,makePlaylist:function(t){var e=n.filter((function(e){return e.band===t}));K(m,h,e).then((function(t){return Q(h,t,_(h,e))}))},deleteHandler:function(t){var e=n.filter((function(e){return e.band!==t}));c(e)}})]})},lt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,325)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(ot,{})}),document.getElementById("root")),lt()}},[[286,1,2]]]);
//# sourceMappingURL=main.1d96c91f.chunk.js.map
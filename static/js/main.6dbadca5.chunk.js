(this.webpackJsonpplaylistapp=this.webpackJsonpplaylistapp||[]).push([[0],{262:function(t,e,n){},286:function(t,e,n){},287:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(87),i=n.n(a),s=(n(262),n(11)),o=n(94),l=n(324),u=n(209),d=n(3),b=n(35),j=n(234),h=n(318),f=n(180),p=n(121),O=n(2),x=function(){var t=Object(r.useState)(!1),e=Object(s.a)(t,2),n=e[0],c=e[1],a=Object(b.f)();return Object(r.useEffect)((function(){c(!0)}),[]),Object(O.jsx)(j.a,{container:!0,sx:Object(d.a)({display:"flex",m:"auto"},a.breakpoints.up("xs"),{width:"100%",justifyContent:"space-evenly",alignItems:"center"}),children:Object(O.jsx)(j.a,{item:!0,xs:3,children:Object(O.jsx)(h.a,{direction:"right",in:n,style:{transitionDelay:"300ms"},mountOnEnter:!0,unmountOnExit:!0,children:Object(O.jsx)(f.a,{sx:{borderRadius:16,boxShadow:4},variant:"outlined",children:Object(O.jsx)(p.a,{align:"center",sx:{p:1.5},children:"Make My Concert"})})})})})},g=n(240),m=n(16),y=n(147),v=n.n(y),k=n(208),S=n(325),C=n(225),w=n(135),P=n(226),A=n(241),I=n.n(A),B=n(221),E=n(222),T=n(223),M=n(224);function F(t){var e=t.singleSearch;return Object(O.jsx)(B.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",overflow:"auto",maxHeight:300},children:e.length>0?e.map((function(t,e){return Object(O.jsx)(E.a,{divider:!0,children:Object(O.jsx)(T.a,{disableGutters:!0,children:Object(O.jsx)(M.a,{primary:e+1+". "+t})},t)},t)})):Object(O.jsx)("div",{})})}var z=n(227),J=n(242),R=n.n(J),D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};var G=function(t){var e=t.setPlaylists,n=t.loggedIn,c=t.setMySetlist,a=Object(r.useState)(null),i=Object(s.a)(a,2),o=i[0],l=i[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),j=d[0],h=d[1],f=Object(r.useState)("2021"),x=Object(s.a)(f,2),y=x[0],A=x[1],B=Object(r.useState)(!1),E=Object(s.a)(B,2),T=E[0],M=E[1],J=Object(r.useState)([]),G=Object(s.a)(J,2),L=G[0],H=G[1],N=Object(r.useState)(!1),q=Object(s.a)(N,2),V=q[0],W=q[1],Y=function(){M(!1),l(""),H(""),h(!1),W(!1)},_=Object(b.f)(),K=function(){var t=Object(k.a)(v.a.mark((function t(e){var n,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o||!(y.length<4)){t.next=2;break}return t.abrupt("return");case 2:if(n=o.replace(" ","-"),"click"!==e.type){t.next=17;break}return W(!0),t.next=7,fetch("https://my-setlist.herokuapp.com/band",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({band:n,yearOf:y})}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}));case 7:if((r=t.sent).error){t.next=14;break}return W(!1),t.next=12,r.map((function(t){return t.sets.set}));case 12:return c=t.sent,t.abrupt("return",c);case 14:if(!r.error){t.next=17;break}return W(!1),t.abrupt("return",r);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=Object(k.a)(v.a.mark((function t(n){var r,c,a,i,s,o,l,u,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,K(n);case 3:if((r=t.sent).error)W(!1);else{for(W(!1),h(!0),c=[],r.forEach((function(t){t.length>0&&c.push.apply(c,Object(m.a)(t))})),a=[],i=0,s=c;i<s.length;i++){o=s[i],l=Object(g.a)(o.song);try{for(l.s();!(u=l.n()).done;)d=u.value,a.includes(d.name)||a.push(d.name)}catch(b){l.e(b)}finally{l.f()}}H(a),e((function(t){return t.length>0?[].concat(Object(m.a)(t),[L]):[L]}))}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{children:Object(O.jsxs)("div",{children:[Object(O.jsx)(C.a,{disabled:!n,sx:{color:"black"},onClick:function(){return M(!0)},children:"Search For Artists"}),Object(O.jsx)(w.a,{open:T,onClose:Y,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(O.jsx)(S.a,{sx:D,children:j?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(R.a,{fontSize:"large",sx:{position:"absolute",top:-5,right:-5},onClick:function(){return Y()}}),Object(O.jsxs)(S.a,{sx:{display:""},children:[Object(O.jsx)(p.a,{textAlign:"center",sx:{background:_.palette.background.default,borderRadius:25},variant:"h4",children:o}),Object(O.jsx)(C.a,{onClick:function(){c((function(t){return 0===t.length?[{band:o,set:L}]:[].concat(Object(m.a)(t),[{band:o,set:L}])}))},sx:{color:_.palette.background.default,m:2,borderRadius:25,border:"black",background:"black",":hover":{background:"black"}},children:"Add to Setlists"}),Object(O.jsx)(F,{singleSearch:L})]})]}):Object(O.jsxs)("div",{children:[Object(O.jsx)(P.a,{sx:{pa:2},label:"Search for Band",onChange:function(t){return l(t.target.value)}}),Object(O.jsx)(P.a,{sx:{pa:2},defaultValue:"2021",label:"Year",onChange:function(t){return A(t.target.value)}}),Object(O.jsx)(C.a,{children:V?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(z.a,{})," ",Object(O.jsx)(p.a,{children:"Searching..."})]}):Object(O.jsx)(I.a,{fontSize:"large",onClick:function(t){return Q(t)}})})]})})})]})})},L=n.p+"static/media/spotify.2ad9efcc.png",H=n(92),N=H.Paper,q=H.Grid,V=H.Button,W=H.Avatar,Y=function(t){var e=t.setMySetlist,n=t.loggedIn,c=Object(r.useState)([]),a=Object(s.a)(c,2),i=a[0],o=a[1];return Object(O.jsxs)(q,{container:!0,alignItems:"center",justifyContent:"space-evenly",columnSpacing:2,sx:{height:100,background:"linear-gradient(to right bottom, white, #0000)",borderRadius:24},children:[" ",Object(O.jsx)(q,{item:!0,children:Object(O.jsx)(N,{sx:{},children:Object(O.jsx)(G,{loggedIn:n,setMySetlist:e,playlist:i,setPlaylists:o,sx:{p:1,height:72,width:210}})})}),Object(O.jsx)(q,{item:!0,children:Object(O.jsx)(N,{children:Object(O.jsxs)(V,{onClick:function(){window.location=window.location.href.includes("localhost")?"http://localhost:8888/login":"https://my-setlist.herokuapp.com/login"},sx:{color:"black"},endIcon:Object(O.jsx)(W,{src:L}),children:["Login to Spotify"," "]})})})]})},_=n(243),K=n.n(_),Q=function(t,e){var n=[];return e[0].set.forEach((function(r){var c=r.replace(" ","%20"),a=fetch("https://api.spotify.com/v1/search?q=".concat(c,"%20artist:").concat(e[0].band,"&type=track"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(t){return t.json()})).then((function(t){if(t.tracks.items.length>0)return t.tracks.items[0].uri}));n.push(a)})),Promise.all(n)},U=function(t,e,n){var r=fetch("https://api.spotify.com/v1/users/".concat(t,"/playlists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({name:"".concat(n[0].band," Setlist"),description:"Created by Make my Concert",public:!0})}).then((function(t){return t.json()})).then((function(t){return t.id}));return Promise.resolve(r)},X=function(t,e,n){Promise.resolve(n).then((function(n){var r=n.filter((function(t){return void 0!==t}));fetch("https://api.spotify.com/v1/playlists/".concat(e,"/tracks"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({uris:r})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){return console.log(t)}))}))},Z=function(t,e){fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+e}}).then((function(t){return t.json()})).then((function(e){e.id&&t(e.id)})).catch((function(t){return console.log(t)}))},$=(n(286),n(235)),tt=n(232),et=n(231),nt=n(245),rt=n.n(nt),ct=n(244),at=n.n(ct),it=n(322),st=function(t){var e=t.makePlaylist,n=t.set,c=Object(r.useState)(!1),a=Object(s.a)(c,2),i=a[0],o=a[1];return Object(O.jsxs)(C.a,{disabled:i,onClick:function(){o(!0),e(n.band)},style:{border:"2px solid"},endIcon:Object(O.jsx)(it.a,{}),children:[" ",i?"Added! Check profile":"Add to Spotify"]})},ot=function(t){var e=t.mySetlist,n=t.deleteHandler,r=t.makePlaylist;return Object(O.jsx)(f.a,{sx:{m:2,borderRadius:10,height:240,background:"linear-gradient(to right bottom, white, #0000)"},children:e.length>0?e.map((function(t){return Object(O.jsxs)($.a,{children:[Object(O.jsx)(tt.a,{"aria-controls":"panel1a-content",id:"panel1a-content",expandIcon:Object(O.jsx)(at.a,{}),children:Object(O.jsx)(p.a,{children:t.band})}),Object(O.jsxs)(et.a,{children:[Object(O.jsxs)(C.a,{onClick:function(){n(t.band)},style:{border:"2px solid",margin:4},color:"error",endIcon:Object(O.jsx)(rt.a,{}),children:[" ","Delete from setlist"]}),Object(O.jsx)(st,{makePlaylist:r,set:t}),t.set.map((function(t,e){return Object(O.jsx)(E.a,{divider:!0,children:Object(O.jsx)(T.a,{disableGutters:!0,children:Object(O.jsx)(M.a,{primary:e+1+". "+t})},t)},t)}))]})]},t.band)})):Object(O.jsx)(S.a,{sx:{},children:Object(O.jsxs)(p.a,{justifyContent:"center",textAlign:"center",width:"100%",children:[" ","Login and add artists to your Setlist!"]})})})},lt=Object(o.b)({palette:{background:{default:"#ABCED2"}}});var ut=function(){var t=Object(r.useState)([]),e=Object(s.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(!1),i=Object(s.a)(a,2),o=i[0],d=i[1],b=Object(r.useState)(null),j=Object(s.a)(b,2),h=j[0],f=j[1],p=Object(r.useState)(null),g=Object(s.a)(p,2),m=g[0],y=g[1];return Object(r.useEffect)((function(){var t=K.a.parse(window.location.search).access_token;t&&(d(!0),f(t),Z(y,h))}),[h]),Object(O.jsxs)(l.a,{theme:lt,children:[Object(O.jsx)(u.b,{}),Object(O.jsx)(x,{}),Object(O.jsx)(Y,{setMySetlist:c,loggedIn:o,mySetlist:n}),Object(O.jsx)(ot,{mySetlist:n,makePlaylist:function(t){var e=n.filter((function(e){return e.band===t}));U(m,h,e).then((function(t){return X(h,t,Q(h,e))}))},deleteHandler:function(t){var e=n.filter((function(e){return e.band!==t}));c(e)}})]})},dt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,326)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),a(t),i(t)}))};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(ut,{})}),document.getElementById("root")),dt()}},[[287,1,2]]]);
//# sourceMappingURL=main.6dbadca5.chunk.js.map